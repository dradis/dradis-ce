<ul class="nodes-nav tree-navigation">
  <li class="tree-header sidebar-link m-0 <%= 'active' if controller_path.include?('nodes') %>" data-behavior="nodes-tree sidebar-toggle open-only">
    <i class="fa-solid fa-sitemap sidebar-link-icon"></i>
    <div class="sidebar-link-label-container">
      <span class="sidebar-link-label">Nodes</span>
      <div class="d-flex align-items-center gap-1">
        <div class="add-node">
          <div class="dropdown">
            <%= link_to 'javascript:void(0)', class: 'dropdown-toggle add-node-toggle', data: { bs_toggle: 'dropdown' } do %>
              <i class="fa-solid fa-plus"></i>
            <% end %>
            <div class='dropdown-menu'>
              <a href='#modal_add_branch_node' class='dropdown-item' tabindex='-1' data-bs-toggle='modal'>Add top-level node</a>
            </div>
          </div>
        </div>
        <div class="dropdown node-tree-dropdown">
          <%= link_to "#node-tree", data: { bs_toggle: 'collapse', behavior: 'collapse-collection toggle-node-tree' } do %>
            <i class="fa-solid fs-6" data-behavior="toggle-icon"></i><span class="visually-hidden">Toggle node tree</span>
          <% end %>
        </div>
      </div>
    </div>
  </li>

  <div id="node-tree" class="note-list collapse show" data-behavior="node-tree-content">
    <div class="nodes-list restrict-height px-lg-3" data-behavior="restrict-height">
      <% if @nodes.empty? %>
        <%= render 'shared/empty_state',
          actions_partial: 'layouts/tylium/nodes/empty_state_actions',
          docs_link: 'https://dradis.com/support/guides/projects/nodes.html',
          name: 'node',
          text: 'Use nodes to structure and organize your project.'
        %>
      <% else %>
        <%= render partial: 'layouts/tylium/node', collection: @nodes %>
      <% end %>
    </div>
  </div>
</ul>
